# SafePlate Deployment Guide - Render

## ğŸš€ Quick Deploy to Render

### Step 1: Push Your Code to GitHub
```bash
git add .
git commit -m "Prepare for Render deployment"
git push origin testbranch
```

### Step 2: Create Render Account
1. Go to [render.com](https://render.com)
2. Sign up with your GitHub account

### Step 3: Deploy from Dashboard
1. Click **"New +"** â†’ **"Blueprint"**
2. Connect your GitHub repository: `tedgershon/SafePlate`
3. Select the `testbranch` branch
4. Render will automatically detect `render.yaml` and create:
   - A PostgreSQL database
   - A web service running your Django app

### Step 4: Set Environment Variables
In the Render dashboard, go to your web service and add these environment variables:

**Required:**
- `AIRIA_API_KEY`: `ak-MzkwNTAzMjkwNHwxNzYyNjM3MDY0MzE2fHRpLVEyRnlibVZuYVdVZ1RXVnNiRzl1SUZWdWFYWmxjbk5wZEhrdFQzQmxiaUJTWldkcGMzUnlZWFJwYjI0dFVISnZabVZ6YzJsdmJtRnNYek0xTTJVeE1qRTBMVEE0WW1VdE5ERTFOQzFpWVdFeExXWTRObU5oTlRFeE5XWmpOZz09fDF8NDE1NTIwOTczNCAg`
- `AIRIA_RECIPE_AGENT_ENDPOINT`: Your Airia endpoint URL

**Optional (automatically set by Render):**
- `DJANGO_SECRET_KEY`: Auto-generated by Render
- `DATABASE_URL`: Auto-set when database is created
- `RENDER_EXTERNAL_HOSTNAME`: Auto-set by Render

### Step 5: Deploy!
1. Click **"Apply"** to create the services
2. Wait for the build to complete (~5-10 minutes)
3. Your app will be live at: `https://safeplate.onrender.com`

## ğŸ“ What Was Set Up

### Files Created:
- âœ… `build.sh` - Build script that installs dependencies and runs migrations
- âœ… `render.yaml` - Infrastructure as code configuration
- âœ… `.env.example` - Template for environment variables

### Dependencies Added:
- âœ… `gunicorn` - Production WSGI server
- âœ… `psycopg2-binary` - PostgreSQL adapter
- âœ… `whitenoise` - Static file serving
- âœ… `dj-database-url` - Database URL parser

### Settings Updated:
- âœ… Production-ready `ALLOWED_HOSTS`
- âœ… PostgreSQL database configuration
- âœ… Static files with WhiteNoise
- âœ… Security middleware

## ğŸ”§ Manual Deployment (Alternative)

If you prefer manual setup:

1. **Create Web Service:**
   - New â†’ Web Service
   - Connect GitHub repo
   - Build Command: `./build.sh`
   - Start Command: `gunicorn safeplate_project.wsgi:application`

2. **Create PostgreSQL Database:**
   - New â†’ PostgreSQL
   - Connect to web service

3. **Set Environment Variables** (as listed above)

## ğŸ› Troubleshooting

### Build Fails
- Check that `build.sh` is executable: `chmod +x build.sh`
- Verify all dependencies are in `requirements.txt`

### Static Files Not Loading
- Ensure `STATIC_ROOT` is set in settings
- Run `python manage.py collectstatic` (happens in build.sh)

### Database Connection Error
- Verify `DATABASE_URL` is set by Render
- Check database is created and linked to web service

### API Errors
- Confirm `AIRIA_API_KEY` is set correctly
- Verify `AIRIA_RECIPE_AGENT_ENDPOINT` is correct

## ğŸ“Š Monitoring

- View logs in Render dashboard
- Monitor database usage
- Check deployment history

## ğŸ’° Pricing

- **Free Tier:**
  - Web Service: Free (sleeps after 15 min of inactivity)
  - PostgreSQL: Free (90 days, then $7/month)

- **Paid Tier:**
  - Starter: $7/month (no sleep)
  - Standard: $25/month (better performance)

## ğŸ”„ Updates

To deploy updates:
```bash
git add .
git commit -m "Your update message"
git push origin testbranch
```

Render will automatically rebuild and deploy! ğŸ‰
